\documentclass[sigconf]{acmart}
\settopmatter{printacmref=false}
\setcopyright{none}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{breqn}
\usepackage{latexsym}
\usepackage{placeins}
\usepackage{graphicx}
\usepackage{bm}
\usepackage{lipsum}
\usepackage{array}
\usepackage{color}

\newcommand{\TODO}[1]{\textcolor{red}{\bf{#1}}}

\begin{document}

\title{PathRec: Visual Analysis of Travel Route Recommendations}
\subtitle{Supplementary Material}
\maketitle

\thispagestyle{empty}

\appendix

\section{Alternative approaches to trajectory recommendation}
\label{sec:alternative}

\TODO{Dawei: the section title says {\em approaches} but the text only talks about rankSVM. Do you want to list Markov (refer to CIKM16) and others too? i.e. at the level of describing the table rows in CIKM}

A number of approaches have been proposed to solve the trajectory recommendation problem.
\citet{ijcai15} formulated an optimisation problem inspired by the travelling salesman problem,
and \citet{cikm16paper} proposed to learn a RankSVM~\cite{lranksvm} model to rank POIs with respect to a query,
in particular, 
the training objective is
\begin{equation*}
\resizebox{\linewidth}{!}{$\displaystyle
\min_{\mathbf{w}} \frac{1}{2} \mathbf{w}^\top \mathbf{w} + C \cdot \sum_{i=1}^n \sum_{(p,p') \in \mathcal{R}(\mathbf{x}^{(i)})}
          \max\left(0, 1 - \mathbf{w}^\top \left(\Phi(\mathbf{x}^{(i)}, p) - \Phi(\mathbf{x}^{(i)}, p') \right) \right)^2,
$}
\end{equation*}
where $\mathbf{w}$ denotes the model parameters, $\Phi$ is a query-POI feature mapping, $C > 0$ is a regularisation constant,
and $\mathcal{R}(\mathbf{x})$ is the set of POI pairs $(p, p')$ such that $p$ is ranked above $p'$,
e.g. POI $p$ is observed more often than POI $p'$, with respect to query $\mathbf{x}$.
Lastly, the top-ranked POIs with respect to the given query were taken to form a trajectory.

\section{Score normalisation for visualisation}
\label{sec:scorenorm}

\TODO{Dawei: describe that what the visualizer shows, i.e. scores and not weights. Illustrate using an example.}

%We describe details on how to normalise prediction scores for better visualisation. 
To better visualise trajectory/POI/transition scores, we perform linear scaling on these scores for each query.

\subsection{Scaling overall trajectory scores}
Specifically, we scale the trajectory scores for the top 10 suggested routes such that:
\begin{itemize}
\item The first trajectory scores 100,
\item and the last (i.e. 10-th) trajectory scores 10.
\end{itemize}
Further, 
We share the same scaling parameters as that of trajectory scores for scores of POI features, e.g. popularity, visit duration, category etc.

\subsection{Displaying unary and pairwise scores}

For transition scores, however, 
we perform another linear scaling instead of sharing the scaling parameters of trajectory scores to achieve better visualisation,
since many of the transition scores are very small, we scale them into the range [0.1, 1].



\section{Choices on visualisation paradigms}

\TODO{Dawei: This section is written without a clear logical flow. Suggested structure:
para1: design considerations - want to break down scores for different points and information sources, shows ranked list rather than single choice, has POI info and route info.\\
and then use one paragraph to address each consideration. \\
design consideration: justify using the ben shneiderman mantra \url{http://www.infovis-wiki.net/index.php/Visual_Information-Seeking_Mantra}.\\
include references: for radar, parrallel coordinates and so on. include an example of the same info visualized in radar and parralell coordinates, discuss why we chose on and not the other. }

%We discuss rationale for choosing visualisation components and possible alternatives. 
To help users of trajectory recommendation system understand why the suggested routes are recommended,
we make full use of the advantage of SSVM that the score of a trajectory, 
which represents the quality with respect to the given query, 
can be decomposed into a set of scores corresponding to the features of individual POIs and transitions between adjacent POIs, then it becomes straightforward to visualise these scores using a stacked bar plot,
which intuitively shows the contribution of each POI in a trajectory.

In addition, the stacked bar plot,
together with the visualisation of the significance of individual features in each POI in the radar chart,
also allows users to compare the importance of POIs in different suggested routes.

These visualisation enables users to choose the best trajectory among the suggested routes by trading off a number of factors, e.g. popularity, distance etc.
Compared with classic recommendation system which only provides a score for each suggested item, 
this approach makes the recommendation more transparent to end-users.

Alternatively, in addition to show the ranking of routes, 
we can also display the ranking of POIs and transitions with respect to the given query, 
as well as the contributions by all POIs and all transitions in a trajectory.
For visualising POI features, one can also use parallel coordinates instead of radar chart.

\bibliographystyle{ACM-Reference-Format}
\bibliography{ref_appendix}

\end{document}
